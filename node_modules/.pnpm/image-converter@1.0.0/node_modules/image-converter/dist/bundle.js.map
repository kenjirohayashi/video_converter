{"version":3,"sources":["webpack:///webpack/bootstrap d06d6b0b7b995111105d","webpack:///./app/app.ts","webpack:///./app/document.manager.ts"],"names":[],"mappings":"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","file":"dist/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap d06d6b0b7b995111105d\n **/","import doc = require('./document.manager');\n//import clipboard = require('clipboard');\n\nvar manager = new doc.DocumentManager(new DOMParser(), new XMLSerializer());\nvar svgContainerId = \"svg-container\";\n\nfunction convert() {\n    console.log(\"Start Convert\");\n    manager.convertToPngData(function (data) {\n        var body = document.querySelector('body');\n\n        var text = document.createElement(\"p\");\n        text.id = \"final-data\";\n        text.innerHTML = data;\n        body.appendChild(text);\n\n        var img = new Image;\n        img.src = data;\n        body.appendChild(img);\n    });\n}\n\n\nfunction clearSvg() {\n\n    var container = document.getElementById('svg-container');\n    var svg = document.querySelector(\"#svg-container svg\");\n    if (svg) {\n        container.removeChild(svg)\n    }\n\n}\n\nfunction loadFile(file) {\n    var reader = new FileReader();\n    reader.onload = (function (e) {\n        console.log(file.name);\n        if (file.name.endsWith(\".css\")) {\n            loadStyleFromFile(file);\n        } else if (file.name.endsWith(\".svg\")) {\n            loadImageFromFile(file);\n        }\n    });\n    reader.readAsText(file);\n}\n\nfunction loadImageFromFile(file) {\n    var reader = new FileReader();\n    reader.onload = (function (e) {\n        manager.createDocument(reader.result);\n        updateSvg();\n\n    });\n    reader.readAsText(file);\n}\n\nfunction loadStyleFromFile(file) {\n    var reader = new FileReader();\n    reader.onload = (function (e) {\n        manager.addStyle(reader.result);\n        applyStyles();\n    });\n    reader.readAsText(file);\n}\n\nfunction applyStyles() {\n    if (manager.svgDoc) {\n        manager.applyStyles();\n        clearSvg();\n        updateSvg();\n    }\n}\n\nfunction updateSvg(){\n    var container = document.getElementById(svgContainerId);\n    container.innerHTML += manager.svgString();\n}\n\nfunction handleFileSelect(evt) {\n    evt.stopPropagation();\n    evt.preventDefault();\n    for (var i = 0, f; f = evt.dataTransfer.files[i]; i++) {\n        loadFile(f);\n    }\n}\n\nfunction handleDragOver(evt) {\n    evt.stopPropagation();\n    evt.preventDefault();\n    evt.dataTransfer.dropEffect = 'copy';\n}\n\n\n\n\n\nwindow.onload = () => {\n    console.log('Window load');\n    var svgDropZone = document.getElementById('drop-zone');\n    svgDropZone.addEventListener('dragover', handleDragOver, false);\n    svgDropZone.addEventListener('drop', handleFileSelect, false);\n\n    var clearBtn = document.getElementById(\"clearBtn\");\n    console.log(clearBtn);\n    clearBtn.addEventListener('click', function () {\n        console.log('Click Clear');\n        clearSvg();\n    });\n\n    var generateBtn = document.getElementById(\"generateBtn\");\n    console.log(generateBtn);\n    generateBtn.addEventListener('click', function () {\n        console.log('Click generate');\n        convert();\n    });\n\n}\n\n\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./app/app.ts\n **/","export function createDataUrl(img:HTMLImageElement):string{\n    var canvas = document.createElement(\"canvas\");\n    \n    canvas.width = img.width;\n    canvas.height = img.height;\n    var ctx = canvas.getContext(\"2d\");\n    ctx.drawImage(img, 0, 0);\n    return canvas.toDataURL(\"image/png\");\n}\n\nexport function svgToImage(svg:string):HTMLImageElement{\n    var img = new Image;\n    img.src = \"data:image/svg+xml;base64,\" + btoa(svg);\n    return img;\n}\n\n\n\nexport class DocumentManager {\n    svgDoc: any;\n    styles: string[] = [];\n\n    constructor(private parser:DOMParser, private serializer:XMLSerializer) {\n\n    }\n\n    create(svgDocument:Document){\n        this.svgDoc = svgDocument;\n        var def = this.svgDoc.documentElement.getAttribute(\"xmlns\");\n        if (!def) {\n            this.svgDoc.documentElement.setAttribute(\"xmlns\", \"http://www.w3.org/2000/svg\");\n        }\n    }\n    \n    createStyleElement(style: string): any {\n        var styleElement = this.svgDoc.createElement(\"style\");\n        styleElement.setAttribute(\"type\", \"text/css\");\n        var cdata = this.svgDoc.createCDATASection(style);\n        styleElement.appendChild(cdata);\n        return styleElement;\n    }\n\n    createDefsElement(): Element {\n        let defs = this.svgDoc.createElement(\"defs\");\n        this.svgDoc.documentElement.appendChild(defs);\n        return defs;\n    }\n\n    applyStyles() {\n        let defList = this.svgDoc.getElementsByTagName(\"defs\");\n        let defs = defList[0];\n        if (!defs || defs.length == 0) {\n            defs = this.createDefsElement();\n        }\n\n        for (var i = 0; i < this.styles.length; i++) {\n            var styleElement = this.createStyleElement(this.styles[i]);\n            defs.appendChild(styleElement);\n        }\n    }\n\n    addStyle(style: string) {\n        this.styles.push(style);\n    }\n\n    width(): number {\n        console.log(\"Calculate width from svg\");\n        if(this.svgDoc){\n            let width =  Number(this.svgDoc.documentElement.getAttribute(\"width\"))\n            console.log(\"Found width:\"+width);\n            if(width){\n                return width;\n            }\n        }\n        \n        return 300;\n    }\n\n    height(): number {\n        console.log(\"Calculate height from svg\");\n        if(this.svgDoc){\n            let height =  Number(this.svgDoc.documentElement.getAttribute(\"height\"));\n            console.log(\"Found height:\"+height);\n            if(height){\n                return height;\n            }\n        }\n        \n        return 300;\n    }\n\n    svgString(): string {\n        return this.serializer.serializeToString(this.svgDoc.documentElement);\n    }\n\n    createDocument(svgDocument: string) {\n        this.create(this.parser.parseFromString(svgDocument, \"text/xml\"));      \n    }\n\n    convertToPngData(callback) {\n        if (this.svgDoc) {\n            var img:HTMLImageElement = svgToImage(this.svgString());\n            img.width = this.width();\n            img.height = this.height();\n            img.onload = function () {\n                var data = createDataUrl(this);\n                callback(data);\n            };\n        }\n    }\n\n    \n    \n}\n\n\n/** WEBPACK FOOTER **\n ** ./app/document.manager.ts\n **/"],"sourceRoot":""}